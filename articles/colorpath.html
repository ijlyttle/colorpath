<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>colorpath • colorpath</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="colorpath">
<meta property="og:description" content="colorpath">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">colorpath</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.1.9006</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/colorpath.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/theory.html">Theory for Color Scales</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ijlyttle/colorpath/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="colorpath_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="colorpath_files/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="colorpath_files/splattr_swatch-0.0.3/swatch-lib.js"></script><script src="colorpath_files/splattr_swatch-binding-0.0.0.9008/splattr_swatch.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>colorpath</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ijlyttle/colorpath/blob/master/vignettes/colorpath.Rmd"><code>vignettes/colorpath.Rmd</code></a></small>
      <div class="hidden name"><code>colorpath.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/ijlyttle/colorpath">"colorpath"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tibble.tidyverse.org/">"tibble"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://kwstat.github.io/pals/">"pals"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/ijlyttle/splattr">"splattr"</a></span><span class="op">)</span></code></pre></div>
<p>The goal of <strong>colorpath</strong> is to help you design sequential (and diverging) color palettes that are effective and perceptually uniform.</p>
<p>At the moment, this vignette has an audience of one. As we get our legs under us, this vignette will become more-accessible.</p>
<p>This package uses the idea of a <em>color path</em>; I use this term to describe a trajectory through LUV colorspace from which one could extract sequential palettes for each of light and dark mode. This way, a light-mode palette and a dark-mode palette can look like they came from the same place.</p>
<p>There are a few principles this package rests on:</p>
<ol style="list-style-type: decimal">
<li><p>The HCL colorspace is a relatively intuitive way to describe colors.</p></li>
<li><p>The LUV colorspace is approximately perceptually-uniform; i.e. the Euclidean distance between two colors in LUV space corresponds well with the perceptual difference between those colors.</p></li>
<li><p>The Euclidean distance along a Bézier spline can be computed readily.</p></li>
</ol>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The idea is to start with a data frame of HCL values - these will be coordinates of control-points for a Bézier spline. If you want to learn more about the HCL colorspace, the folks who develop the <strong>colorspace</strong> package offer a <a href="http://hclwizard.org">comprehensive introduction</a>, a <a href="http://hclwizard.org/hclcolorpicker/">color-picker</a> app, as well as other apps.</p>
<div id="proscribe-colors" class="section level3">
<h3 class="hasAnchor">
<a href="#proscribe-colors" class="anchor"></a>Proscribe colors</h3>
<p>This package has a such a sample HCL dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_hcl_blues</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;       h     c     l</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1   250     0    30</span>
<span class="co">#&gt; 2   250   150    60</span>
<span class="co">#&gt; 3   250     0    90</span></code></pre></div>
<p>A few things to notice here:</p>
<ul>
<li><p>there are three columns: <code>h</code>, <code>c</code>, and <code>l</code> for hue, chroma, and luminance</p></li>
<li><p>luminance goes from low to high</p></li>
<li><p>chroma begins and ends at zero, has a peak in the middle</p></li>
<li><p>hue is constant</p></li>
</ul>
<p>As you will see, this is not the most exciting set of blues. There should be more chroma. At some point a better demonstration set should be chosen, but it gets the job done for now. For example, there is no reason to have only three control points, and there is no reason you can’t vary the hue. That said, I think it is a good idea that, for a given “single-ish hue” color path, the hue should vary linearly with the luminance. s We can convert this data frame into an LUV matrix:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mat_luv_blues</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_mat_luv.html">as_mat_luv</a></span><span class="op">(</span><span class="va">df_hcl_blues</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">mat_luv_blues</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;       l       u        v</span>
<span class="co">#&gt; [1,] 30  -0.003   -0.009</span>
<span class="co">#&gt; [2,] 60 -51.303 -140.954</span>
<span class="co">#&gt; [3,] 90  -0.003   -0.009</span></code></pre></div>
<p>The LUV space is a Cartesian form of the HCL space; HCL is a polar form of LUV. If <code>chroma</code> is zero, we should expect <code>u</code> and <code>v</code> both to be zero; we can see that this is not the case here. This is because the function <code><a href="../reference/as_mat_luv.html">as_mat_luv()</a></code> has an argument <code>chroma_min</code> whose default is <code>0.01</code>.</p>
<p>This is a trick used to preserve the hue of a color if its chroma is zero; a color with chroma value of 0.01 is imperceptible from thE corresponding color with a chroma value of 0.</p>
<p>Also, for convenience, <code>mat_luv_blues</code> is an exported dataset.</p>
</div>
<div id="simple-path" class="section level3">
<h3 class="hasAnchor">
<a href="#simple-path" class="anchor"></a>Simple path</h3>
<p>The coordinates-set <code>mat_luv_blues</code> represents a set of control points for a Bézier spline in LUV space.</p>
<p>Let’s create the spline:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">path_blues</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pal_luv_bezier.html">pal_luv_bezier</a></span><span class="op">(</span><span class="va">mat_luv_blues</span>, rescale_path <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">path_blues</span>
<span class="co">#&gt; function(x): </span>
<span class="co">#&gt;   input:  vector (0 &lt;= x &lt;= 1)</span>
<span class="co">#&gt;   output: matrix LUV values</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Bézier spline based on these control points:</span>
<span class="co">#&gt;       l       u        v</span>
<span class="co">#&gt; [1,] 30  -0.003   -0.009</span>
<span class="co">#&gt; [2,] 60 -51.303 -140.954</span>
<span class="co">#&gt; [3,] 90  -0.003   -0.009</span></code></pre></div>
<p>As you can see, this is a palette function. It takes a numeric input; however, instead of hex-codes, it returns LUV values:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">path_blues</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;       l       u       v</span>
<span class="co">#&gt; [1,] 30  -0.003  -0.009</span>
<span class="co">#&gt; [2,] 60 -25.653 -70.482</span>
<span class="co">#&gt; [3,] 90  -0.003  -0.009</span></code></pre></div>
<p>We can create a ggplot to see what this path looks like in the chroma-luminance plane. The plot function takes the palette function as an argument.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_cl.html">plot_cl</a></span><span class="op">(</span><span class="va">path_blues</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>In the plot, we see three things:</p>
<ul>
<li>points in the palette</li>
<li>the control points for the Bézier spline</li>
<li>for each point plotted from the palette, the color with the maximum chroma, given the hue and luminance.</li>
</ul>
<p>One of the plot specifications is that the chroma axis be scaled proportionately to the luminance axis; we specify the aspect ratio to be one.</p>
<p>When we created <code>path_blues</code>, <code><a href="../reference/pal_luv_bezier.html">pal_luv_bezier()</a></code> used an option <code>rescale_path = FALSE</code>. In the plot, you will see that the points in the palette are equally spaced in luminance. However, they are not equally spaced in terms of the distance along the path.</p>
<p>Underneath the hood, we use the <a href="https://CRAN.R-project.org/package=bezier"><strong>bezier</strong></a> package to calculate the splines. It also has a function to calculate the distance along the path. We can use this information to rescale the input to the palette function to be perceptually uniform, insofar as LUV space is perceptually uniform.</p>
</div>
<div id="rescaled-path" class="section level3">
<h3 class="hasAnchor">
<a href="#rescaled-path" class="anchor"></a>Rescaled path</h3>
<p>In <code><a href="../reference/pal_luv_bezier.html">pal_luv_bezier()</a></code>, the default value for <code>rescale_path</code> is <code>TRUE</code>. This invokes the distance calculation, which can take a few seconds, then rescales the function input:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pal_blues_rescaled</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pal_luv_bezier.html">pal_luv_bezier</a></span><span class="op">(</span><span class="va">mat_luv_blues</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cl.html">plot_cl</a></span><span class="op">(</span><span class="va">pal_blues_rescaled</span>, label_hue <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>You’ll notice a couple of things: the palette points are equally-spaced along the color path, and there are now labels for the value of the hue for each control point. These labels can be informative while developing a color path, but I can see how they might distract from a “finished product”.</p>
</div>
</div>
<div id="path-vs--palette" class="section level2">
<h2 class="hasAnchor">
<a href="#path-vs--palette" class="anchor"></a>Path vs. Palette</h2>
<p>In my mind a color path contains palettes or parts of palettes - the idea would be, say for a corporate palette, to have a series of color paths, say a set of blues, oranges, and greens. From these paths sequential and diverging palettes could be composed from parts of these paths.</p>
<div id="sequential-palette-light-mode" class="section level3">
<h3 class="hasAnchor">
<a href="#sequential-palette-light-mode" class="anchor"></a>Sequential palette (light mode)</h3>
<p>In my mind, a sequential palette for light mode should have high luminance at the low end of the scale and low luminance at the high end of the scale.</p>
<p>We can make such a palette by applying a rescaler function to the path function. One of the rescaler functions work using the luminance of a the path function - in essence, you specify the luminance values you want to form the ends of the color scale.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># there is an opportunity to make this cleaner, I don't like to specify </span>
<span class="co">#  pal_blues_rescaled twice</span>
<span class="va">rsc_light</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rescaler_x.html">rescaler_lum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">85</span>, <span class="fl">40</span><span class="op">)</span>, <span class="va">pal_blues_rescaled</span><span class="op">)</span>

<span class="va">pal_blues_light</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pal_luv_rescale.html">pal_luv_rescale</a></span><span class="op">(</span><span class="va">pal_blues_rescaled</span>, <span class="va">rsc_light</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cl.html">plot_cl</a></span><span class="op">(</span><span class="va">pal_blues_light</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
<div id="sequential-palette-dark-mode" class="section level3">
<h3 class="hasAnchor">
<a href="#sequential-palette-dark-mode" class="anchor"></a>Sequential palette (dark mode)</h3>
<p>For dark mode, the low end of the scale should have colors with low luminance; the high end of the scale should have colors with high luminance:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># there's a shortcut now: pal_luv_rescale_lum()</span>
<span class="va">pal_blues_dark</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pal_luv_rescale.html">pal_luv_rescale_lum</a></span><span class="op">(</span><span class="va">pal_blues_rescaled</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">35</span>, <span class="fl">80</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cl.html">plot_cl</a></span><span class="op">(</span><span class="va">pal_blues_dark</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>To use a sineramp, the input needs to be an integer, the output needs to be hex. We have functions for those.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://kwstat.github.io/pals/reference/pal.sineramp.html">pal.sineramp</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_pal_hex.html">as_pal_disc</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_pal_hex.html">as_pal_hex</a></span><span class="op">(</span><span class="va">pal_blues_dark</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Here’s a bit more detail on <code><a href="../reference/as_pal_hex.html">as_pal_disc()</a></code> and <code><a href="../reference/as_pal_hex.html">as_pal_hex()</a></code>; these each take a palette function, and each return a palette function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">6</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, length.out <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>
<span class="va">x</span>
<span class="co">#&gt; [1] 0.0 0.2 0.4 0.6 0.8 1.0</span>

<span class="co"># input x, output LUV</span>
<span class="fu">pal_blues_dark</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="co">#&gt;             l          u         v</span>
<span class="co">#&gt; [1,] 35.00001  -7.840873 -21.54261</span>
<span class="co">#&gt; [2,] 40.19825 -14.478194 -39.77851</span>
<span class="co">#&gt; [3,] 47.13513 -20.936366 -57.52220</span>
<span class="co">#&gt; [4,] 60.29520 -25.650735 -70.47482</span>
<span class="co">#&gt; [5,] 73.14525 -20.728530 -56.95116</span>
<span class="co">#&gt; [6,] 79.99949 -14.253904 -39.16226</span>

<span class="co"># input x, output hex</span>
<span class="fu"><a href="../reference/as_pal_hex.html">as_pal_hex</a></span><span class="op">(</span><span class="va">pal_blues_dark</span><span class="op">)</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] "#45536C" "#41608C" "#3F72B0" "#5993DF" "#8EB5F4" "#AFC7F4"</span>

<span class="co"># input n (number of colors), output hex</span>
<span class="fu"><a href="../reference/as_pal_hex.html">as_pal_disc</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_pal_hex.html">as_pal_hex</a></span><span class="op">(</span><span class="va">pal_blues_dark</span><span class="op">)</span><span class="op">)</span><span class="op">(</span><span class="va">n</span><span class="op">)</span>
<span class="co">#&gt; [1] "#45536C" "#41608C" "#3F72B0" "#5993DF" "#8EB5F4" "#AFC7F4"</span></code></pre></div>
<p>At this point, I’m not terribly happy with the results. I do not perceive this to be as uniform as I hoped. Speculating:</p>
<ul>
<li>The “curtain” seems washed out at both ends. I think this is due to the sharp chroma peak</li>
<li>I am not as hopeful that individual palettes can be extracted from paths because I think we are asking too much of a path, especially because we are working with a luminance range of 60.</li>
<li>Perhaps this can still be a useful tool to create related palettes?</li>
</ul>
<p>Of course, I could have chosen a bad starting point and become discouraged.</p>
<p>What I think (hope) this package still offers is a way to design a palette reproducibly, capturing your design intent as code or parameters.</p>
<p>New set of ideas: let’s define a surface in within the gamut such that the hue is a monotonic function of luminance.</p>
<p>We can create such a function.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sfc_blues</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/surface_hl.html">surface_hl</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">240</span>, <span class="fl">260</span><span class="op">)</span><span class="op">)</span>

<span class="fu">sfc_blues</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 240 244 248 252 256 260</span></code></pre></div>
<p>We can plot what such a function looks like in the gamut:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_surface_hl.html">plot_surface_hl</a></span><span class="op">(</span><span class="va">sfc_blues</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>Using this slice through the gamut, we can define an HCL data fram (then an LUV matrix) of control points using a data frame in CL, and a surface function:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">50</span>, <span class="fl">80</span><span class="op">)</span>, c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">150</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>

<span class="va">df_hcl_blues_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/df_hcl.html">df_hcl</a></span><span class="op">(</span><span class="va">df_cl</span>, <span class="va">sfc_blues</span><span class="op">)</span>
<span class="va">df_hcl_blues_new</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;       h     c     l</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1   244     0    20</span>
<span class="co">#&gt; 2   250   150    50</span>
<span class="co">#&gt; 3   256     0    80</span>

<span class="va">mat_luv_blues_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_mat_luv.html">as_mat_luv</a></span><span class="op">(</span><span class="va">df_hcl_blues_new</span><span class="op">)</span></code></pre></div>
<p>Now you can create a palette:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pal_blues_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pal_luv_bezier.html">pal_luv_bezier</a></span><span class="op">(</span><span class="va">mat_luv_blues_new</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cl.html">plot_cl</a></span><span class="op">(</span><span class="va">pal_blues_new</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>Perhaps palettes in the same “family” need not be drawn from the same colorpath - just from the same surface.</p>
</div>
</div>
<div id="surfaces" class="section level2">
<h2 class="hasAnchor">
<a href="#surfaces" class="anchor"></a>Surfaces</h2>
<p>This is an attempt to re-boot this vignette; once these sections are on their feet, they will start to “take over” the rest of the vignette.</p>
<p>Maybe I should just try to start at the start. Suffice to say that in its early form, these thoughts are not yet properly attributed. For me, it all starts with the colorspace package, and Achim Zeileis’ talk at UseR!2019.</p>
<p>In day-to-day use, colors on a computer display are expressed using hex-codes, e.g. <a href="https://medium.com/@valgaze/the-hidden-purple-memorial-in-your-web-browser-7d84813bb416"><code>#663399</code></a>. As you likely know, hex-codes express the color in terms of three color channels, or dimensions: red, green and blue. These three dimensions form a <strong>color space</strong> called <strong>sRGB</strong>. A color space is a set of dimensions used to express colors.</p>
<p>The set of all colors that can be expressed using sRGB is called the sRGB <strong>gamut</strong>. It is a subset of the <em>visible</em> gamut, i.e. the set of all colors that can be perceived (generally) by the human eye. Because we are concerned only with colors displayed on monitors, we concern ourselves with the sRGB gamut.</p>
<p>Here’s what the sRGB gamut looks like in the sRGB color space (<a href="https://commons.wikimedia.org/wiki/File:RGB_Cube_Show_lowgamma_cutout_a.png">source</a>):</p>
<div class="figure">
<img src="figs/srgb-gamut-srgb-space.png" alt="sRGB gamut in sRGB space, by Michael Horvath" width="400" height="300"><p class="caption">
sRGB gamut in sRGB space, by Michael Horvath
</p>
</div>
<p>In this representation, the origin (RGB = 0, 0, 0) is the color black, and is hidden in the back corner. The color white (RGB = 1, 1, 1) is the corner “nearest” us. This is an <a href="https://en.wikipedia.org/wiki/Additive_color">additive</a> color space: the primary colors: red, green, and blue, are at three of the vertices. The secondary colors: cyan, magenta, and yellow, are at the three remaining vertices.</p>
<p>This colorspace has a concrete representation - it’s very easy for we humans to think of it as a cube. But there’s a problem with sRGB space, it’s not <strong>perceptually uniform</strong>. Consider two different colors (this would be a great place for an example). We can measure how far apart they are in a color space (using Euclidean distance); we can also make a judgment on how “differently” the two colors are perceived (by a human). If a color space is perceptually uniform, then the color-space distance between two colors in that space is proportional to the perceptual difference between the colors. The sRGB color space is not perceptually uniform.</p>
<p>The reason we are concerned with perceptual uniformity is because a continuous color-palette maps numerical values to colors. We want to make sure that differences in color are interpreted as faithfully as possible as differences in value.</p>
<p>There are color spaces that are more perceptually-uniform than sRGB. Consider the HCL color space, named after its dimensions: hue, chroma, and luminance. We can show the same set of colors, the sRGB gamut, in the HCL color space (<a href="https://commons.wikimedia.org/wiki/File:SRGB_gamut_within_CIELUV_color_space_isosurface.png">source</a>):</p>
<div class="figure">
<img src="figs/srgb-gamut-hcl-space.png" alt="sRGB gamut in HCL space, by Michael Horvath and Christoph Lipka" width="300" height="300"><p class="caption">
sRGB gamut in HCL space, by Michael Horvath and Christoph Lipka
</p>
</div>
<p>Here, we see a distorted view of the original cube. This can help us to define the terms:</p>
<ul>
<li><p>Luminance describes how light or dark a color is; a lighter color has greater luminance. The domain of luminance is 0 to 100.</p></li>
<li><p>Chroma describes how colorful a color is; a grey has no chroma, a bright red has a lot of chroma. The maximum value of chroma depends on the hue and the luminance, i.e. the distorted cube. The largest value for chroma in the sRGB gamut is about 180 for a mid-luminant red.</p></li>
<li><p>Hue describes the particular color, e.g. a red vs. a green. It is cyclical; hue is expressed as an angle, in degrees.</p></li>
</ul>
<p>Hue, chroma, and luminance give us an intuitive and tangible way to describe color, using a color space where distance is reasonably proportional to human perception.</p>
<p>There is another color space we should introduce; it is identical to the HCL color space, except it uses Cartesian coordinates instead of polar coordinates. This is the LUV color space (<a href="https://commons.wikimedia.org/wiki/File:SRGB_gamut_within_CIELCHuv_color_space_isosurface.png">source</a>):</p>
<div class="figure">
<img src="figs/srgb-gamut-luv-space.png" alt="sRGB gamut in LUV space, by Michael Horvath and Christoph Lipka" width="300" height="300"><p class="caption">
sRGB gamut in LUV space, by Michael Horvath and Christoph Lipka
</p>
</div>
<p>The concept of luminance is the same as with HCL. The coordinates U and V are the Cartesian correspondences to hue and chroma. The LUV color space is less intuitive than the HCL color space, but it allows a straightforward calculation of Euclidean distance.</p>
<p>In this package, we want to:</p>
<ul>
<li>think and specify using the HCL color space.</li>
<li>calculate using the LUV color space.</li>
<li>express the colors using the sRGB color space (hex codes).</li>
</ul>
<div id="thoughts-on-continuous-palettes" class="section level3">
<h3 class="hasAnchor">
<a href="#thoughts-on-continuous-palettes" class="anchor"></a>Thoughts on continuous palettes</h3>
<p>Luminance propels everything. Chroma used to create a longer path (larger color-range). Be careful with hue because differences in hue are perceived differently by folks with color-vision deficiency.</p>
<p>Dark mode. Comparing prominence vs. the background.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/ijlyttle/colorpath">"colorpath"</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sfc_cyan</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/surface_hl.html">surface_hl</a></span><span class="op">(</span><span class="fl">192.2</span><span class="op">)</span>
<span class="va">sfc_blue</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/surface_hl.html">surface_hl</a></span><span class="op">(</span><span class="fl">265.9</span><span class="op">)</span></code></pre></div>
<p>We get warnings (from ggplot2) when we render these plots because the second y-axis has a uses the surface-functions which, in these cases, have a constant hue.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_surface_hl.html">plot_surface_hl</a></span><span class="op">(</span><span class="va">sfc_cyan</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_surface_hl.html">plot_surface_hl</a></span><span class="op">(</span><span class="va">sfc_blue</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-21-2.png" width="700"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sfc_multi_blue</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/surface_hl.html">surface_hl</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">271</span>, <span class="fl">215</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/plot_surface_hl.html">plot_surface_hl</a></span><span class="op">(</span><span class="va">sfc_multi_blue</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
<p>Let’s think about some trajectories to plot along this surface. Want to think in terms of light mode and dark mode.</p>
<p>In light mode, let’s set our luminance ceiling to 90; in dark mode, let’s set the luminance floor to 30.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dfcl_blues_light</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span>
      <span class="op">~</span><span class="va">l</span>,      <span class="op">~</span><span class="va">c</span>,
      <span class="fl">90.0</span>,  <span class="fl">30.0</span>,
      <span class="fl">75.0</span>,  <span class="fl">80.0</span>,
      <span class="fl">50.0</span>,  <span class="fl">80.0</span>,
      <span class="fl">30.0</span>,  <span class="fl">60.0</span>,
      <span class="fl">20.0</span>,  <span class="fl">40.0</span>
  <span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dfhcl_blues_light</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/df_hcl.html">df_hcl</a></span><span class="op">(</span><span class="va">dfcl_blues_light</span>, <span class="va">sfc_multi_blue</span><span class="op">)</span>

<span class="va">dfhcl_blues_light</span>
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;       h     c     l</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1  221.    30    90</span>
<span class="co">#&gt; 2  229     80    75</span>
<span class="co">#&gt; 3  243     80    50</span>
<span class="co">#&gt; 4  254.    60    30</span>
<span class="co">#&gt; 5  260.    40    20</span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pal_blues_light</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="../reference/pal_luv_bezier.html">pal_luv_bezier</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_mat_luv.html">as_mat_luv</a></span><span class="op">(</span><span class="va">dfhcl_blues_light</span><span class="op">)</span>, rescale <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cl.html">plot_cl</a></span><span class="op">(</span><span class="va">pal_blues_light</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-25-1.png" width="700"></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hcl</span> <span class="op">&lt;-</span> 
  <span class="fu">pal_blues_light</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">farver</span><span class="fu">::</span><span class="fu"><a href="https://farver.data-imaginist.com/reference/convert_colour.html">convert_colour</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">"luv"</span>, to <span class="op">=</span> <span class="st">"hcl"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;              h        c        l</span>
<span class="co">#&gt;  [1,] 220.6000 30.00000 90.00001</span>
<span class="co">#&gt;  [2,] 224.5388 40.18375 86.43013</span>
<span class="co">#&gt;  [3,] 227.7719 49.90009 81.82097</span>
<span class="co">#&gt;  [4,] 230.9627 58.63841 75.79317</span>
<span class="co">#&gt;  [5,] 234.4944 65.36962 67.96905</span>
<span class="co">#&gt;  [6,] 238.4971 68.55648 58.56516</span>
<span class="co">#&gt;  [7,] 242.7446 67.53435 48.85036</span>
<span class="co">#&gt;  [8,] 247.0135 63.25123 39.93235</span>
<span class="co">#&gt;  [9,] 251.2849 56.84308 32.12757</span>
<span class="co">#&gt; [10,] 255.5890 48.97409 25.45842</span>
<span class="co">#&gt; [11,] 259.8000 40.00000 20.00000</span>

<span class="fu">sfc_multi_blue</span><span class="op">(</span><span class="va">hcl</span><span class="op">[</span>, <span class="st">"l"</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;  [1] 220.6000 222.5991 225.1803 228.5558 232.9373 238.2035 243.6438 248.6379</span>
<span class="co">#&gt;  [9] 253.0086 256.7433 259.8000</span></code></pre></div>
<p>The two plots seem inconsistent. The spline does not respect the surface. It respects only the control points, which are on the surface.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">blues_light_discrete</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_pal_hex.html">as_pal_disc</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_pal_hex.html">as_pal_hex</a></span><span class="op">(</span><span class="va">pal_blues_light</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/splattr/man/swatch.html">swatch</a></span><span class="op">(</span><span class="fu">blues_light_discrete</span><span class="op">(</span><span class="fl">11</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-1089a3c811ed716a713e" style="width:700px;height:432.632880098888px;" class="splattr_swatch html-widget"></div>
<script type="application/json" data-for="htmlwidget-1089a3c811ed716a713e">{"x":{"colors":["#BEE9FB","#A7E1FB","#8DD5F8","#70C5F1","#4EAFE3","#2A95CF","#077AB8","#0062A0","#074D8A","#143B76","#1B2D63"],"height":40,"dx":10,"margin":0,"background":null},"evals":[],"jsHooks":[]}</script>

pal.sineramp(blues_light_discrete)
<p><img src="colorpath_files/figure-html/unnamed-chunk-27-2.png" width="700"></p>
<p>Let’s try a variation on the theme to create a half-palette for a diverging-palette:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dfcl_blues_div_light</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span>
      <span class="op">~</span><span class="va">l</span>,      <span class="op">~</span><span class="va">c</span>,
      <span class="fl">90.0</span>,   <span class="fl">0.0</span>,
      <span class="fl">85.0</span>,  <span class="fl">50.0</span>,
      <span class="fl">70.0</span>,  <span class="fl">80.0</span>,
      <span class="fl">50.0</span>,  <span class="fl">80.0</span>,
      <span class="fl">30.0</span>,  <span class="fl">60.0</span>,
      <span class="fl">20.0</span>,  <span class="fl">40.0</span>
  <span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dfhcl_blues_div_light</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/df_hcl.html">df_hcl</a></span><span class="op">(</span><span class="va">dfcl_blues_div_light</span>, <span class="va">sfc_multi_blue</span><span class="op">)</span>

<span class="va">dfhcl_blues_div_light</span>
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;       h     c     l</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1  221.     0    90</span>
<span class="co">#&gt; 2  223.    50    85</span>
<span class="co">#&gt; 3  232.    80    70</span>
<span class="co">#&gt; 4  243     80    50</span>
<span class="co">#&gt; 5  254.    60    30</span>
<span class="co">#&gt; 6  260.    40    20</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pal_blues_div_light</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="../reference/pal_luv_bezier.html">pal_luv_bezier</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_mat_luv.html">as_mat_luv</a></span><span class="op">(</span><span class="va">dfhcl_blues_div_light</span><span class="op">)</span>, rescale <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cl.html">plot_cl</a></span><span class="op">(</span><span class="va">pal_blues_div_light</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-30-1.png" width="700"></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">blues_div_light_discrete</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_pal_hex.html">as_pal_disc</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_pal_hex.html">as_pal_hex</a></span><span class="op">(</span><span class="va">pal_blues_div_light</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/splattr/man/swatch.html">swatch</a></span><span class="op">(</span><span class="fu">blues_div_light_discrete</span><span class="op">(</span><span class="fl">11</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-329179715ec42b7839c8" style="width:700px;height:432.632880098888px;" class="splattr_swatch html-widget"></div>
<script type="application/json" data-for="htmlwidget-329179715ec42b7839c8">{"x":{"colors":["#E2E2E2","#CFE0EA","#B9DBEE","#9FD3F0","#7FC5ED","#58B0E2","#2C93CC","#0172B0","#015693","#123F7A","#1B2D63"],"height":40,"dx":10,"margin":0,"background":null},"evals":[],"jsHooks":[]}</script>

pal.sineramp(blues_div_light_discrete)
<p><img src="colorpath_files/figure-html/unnamed-chunk-31-2.png" width="700"></p>
</div>
<div id="dark-mode" class="section level3">
<h3 class="hasAnchor">
<a href="#dark-mode" class="anchor"></a>Dark mode</h3>
<p>Here’s my theory (and I’m sure it is not original): a sequential palette “move away” from the background color. For light mode, it start more luminant and become less luminant. For dark mode, it should start less luminant and become more luminant.</p>
<p>In essence, you want the scale to emphasize the “interesting” data by placing those colors as far away from the background as possible.</p>
<p>Here, we assume that light mode has a white background (luminance 100), and that the dark-mode background has a luminance of 20. This has the effect of shortening the available-luminance range for dark mode (values under 20 are inaccessible).</p>
<p>That said, let’s look at what dark mode might look like here:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dfcl_blues_dark</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span>
      <span class="op">~</span><span class="va">l</span>,      <span class="op">~</span><span class="va">c</span>,
      <span class="fl">35.0</span>,  <span class="fl">30.0</span>,
      <span class="fl">50.0</span>,  <span class="fl">80.0</span>,
      <span class="fl">75.0</span>,  <span class="fl">80.0</span>,
      <span class="fl">90.0</span>,  <span class="fl">30.0</span>
  <span class="op">)</span>

<span class="va">dfhcl_blues_dark</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/df_hcl.html">df_hcl</a></span><span class="op">(</span><span class="va">dfcl_blues_dark</span>, <span class="va">sfc_multi_blue</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pal_blues_dark</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/pal_luv_bezier.html">pal_luv_bezier</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_mat_luv.html">as_mat_luv</a></span><span class="op">(</span><span class="va">dfhcl_blues_dark</span><span class="op">)</span>, rescale <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cl.html">plot_cl</a></span><span class="op">(</span><span class="va">pal_blues_dark</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-33-1.png" width="700"></p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">blues_dark_discrete</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_pal_hex.html">as_pal_disc</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_pal_hex.html">as_pal_hex</a></span><span class="op">(</span><span class="va">pal_blues_dark</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/splattr/man/swatch.html">swatch</a></span><span class="op">(</span><span class="fu">blues_dark_discrete</span><span class="op">(</span><span class="fl">11</span><span class="op">)</span>, background <span class="op">=</span> <span class="st">"#333"</span>, margin <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-771acbd50d8384e8e1a3" style="width:700px;height:432.632880098888px;" class="splattr_swatch html-widget"></div>
<script type="application/json" data-for="htmlwidget-771acbd50d8384e8e1a3">{"x":{"colors":["#405373","#3B5C84","#346795","#2C75A9","#2888BF","#38A0D7","#58B8E9","#77CAF4","#92D8F9","#A9E2FC","#BEE9FB"],"height":40,"dx":10,"margin":10,"background":"#333"},"evals":[],"jsHooks":[]}</script>

pal.sineramp(blues_dark_discrete)
<p><img src="colorpath_files/figure-html/unnamed-chunk-34-2.png" width="700"></p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dfcl_blues_div_dark</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span>
      <span class="op">~</span><span class="va">l</span>,      <span class="op">~</span><span class="va">c</span>,
      <span class="fl">35.0</span>,   <span class="fl">0.0</span>,
      <span class="fl">40.0</span>,  <span class="fl">40.0</span>,
      <span class="fl">50.0</span>,  <span class="fl">80.0</span>,
      <span class="fl">75.0</span>,  <span class="fl">80.0</span>,
      <span class="fl">90.0</span>,  <span class="fl">30.0</span>
  <span class="op">)</span>

<span class="va">dfhcl_blues_div_dark</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/df_hcl.html">df_hcl</a></span><span class="op">(</span><span class="va">dfcl_blues_div_dark</span>, <span class="va">sfc_multi_blue</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pal_blues_div_dark</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/pal_luv_bezier.html">pal_luv_bezier</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_mat_luv.html">as_mat_luv</a></span><span class="op">(</span><span class="va">dfhcl_blues_div_dark</span><span class="op">)</span>, rescale <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu"><a href="../reference/plot_cl.html">plot_cl</a></span><span class="op">(</span><span class="va">pal_blues_div_dark</span><span class="op">)</span></code></pre></div>
<p><img src="colorpath_files/figure-html/unnamed-chunk-36-1.png" width="700"></p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">blues_div_dark_discrete</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_pal_hex.html">as_pal_disc</a></span><span class="op">(</span><span class="fu"><a href="../reference/as_pal_hex.html">as_pal_hex</a></span><span class="op">(</span><span class="va">pal_blues_div_dark</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/splattr/man/swatch.html">swatch</a></span><span class="op">(</span><span class="fu">blues_div_dark_discrete</span><span class="op">(</span><span class="fl">11</span><span class="op">)</span>, background <span class="op">=</span> <span class="st">"#333"</span>, margin <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-4925dc3386f2d8165c75" style="width:700px;height:432.632880098888px;" class="splattr_swatch html-widget"></div>
<script type="application/json" data-for="htmlwidget-4925dc3386f2d8165c75">{"x":{"colors":["#525252","#4F5764","#4A5D76","#446689","#3C729E","#3584B7","#3E9FD4","#63BDEB","#86D1F7","#A4DFFB","#BEE9FB"],"height":40,"dx":10,"margin":10,"background":"#333"},"evals":[],"jsHooks":[]}</script>

pal.sineramp(blues_div_dark_discrete)
<p><img src="colorpath_files/figure-html/unnamed-chunk-37-2.png" width="700"></p>
<p>A couple notes on this diverging palette:</p>
<ul>
<li><p>To my eyes, the LUV space is not quite perceptually uniform. The first few colors in this palette, near the greys, seem closer together than the lighter colors do.</p></li>
<li><p>For an actual diverging palette, I think I would cut the palette off at luminance around 80, as a consideration for the other side of the palette (not yet seen). For example, I would not the light orange to appear too close to the light blue.</p></li>
</ul>
<p>There is a way to test this idea about perceptual uniformity. There is now a function in colorpath, <code><a href="../reference/get_distance.html">get_distance()</a></code> that given an LUV palette-function and a number of intervals, calculates the perceptual distance covered by each of the intervals.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/get_distance.html">get_distance</a></span><span class="op">(</span><span class="va">pal_blues_div_dark</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt;  [1] 7.388427 5.372865 4.891737 5.406694 7.086043 9.265223 8.712178 5.940375</span>
<span class="co">#&gt;  [9] 4.629859 4.328111</span></code></pre></div>
<p>This shows the “cie2000” perceptual-distance between adjacent colors. It does show a “lull” in the first part of the palette, although the leading value (~7.4) surprises me.</p>
<p>I think we can solve one problem with another here. We can use a Bézier spline only to define the luminance-chroma trajectory, then use the surface to define the hue according to the luminance. Although colorspace offers a bunch of parameters to define a palette function, colorspace’s math uses the parameters with the same separation; the hue is calculated independently from the chroma.</p>
<p>By splining only on chroma and luminance, we lose effectiveness in the distance rescaling that the bezier package offers. However, using <code><a href="../reference/get_distance.html">get_distance()</a></code>, we could make our own rescaling - which may be more effective than Euclidean distance in LUV space.</p>
</div>
<div id="interim-summary" class="section level3">
<h3 class="hasAnchor">
<a href="#interim-summary" class="anchor"></a>Interim summary</h3>
<p>I think that defining surfaces can make our problem simpler because it separates our variables according to our concerns.</p>
<p>We could define <strong>surfaces</strong> (hue as function of luminance) to represent palette families: greens, blues, etc. We could define <strong>trajectories</strong> (in luminance and chroma) to represent palette type: light, light-diverging, dark, dark-diverging.</p>
<p>Surfaces are chosen with a few factors in mind:</p>
<ul>
<li>open up more chroma space</li>
<li>fidelity to an organization’s brand</li>
<li>among singlish-hue surfaces, blues and oranges seem like default choices because of their contrast with each other, especially for folks with CVD</li>
</ul>
<p>Trajectories are also chosen with a few factors in mind, all of them have to do with the background color for each of light and dark mode. All colors in all palettes should have luminance values at least 10-points different from the luminance of the background color (I choose 10 as an example, maybe the right value is 7). This means that if your dark-mode background has a luminance of 20, the minimum luminance for dark-mode palettes should be 30.</p>
<ul>
<li>for light mode, assuming a background luminance of 100, we could start the a trajectory with luminance 90, then end with a luminance that need not respect the luminance considerations of dark mode, i.e. we could go down to luminance 20.</li>
<li>for dark mode, we should start with a luminance at the luminance limit.</li>
<li>for non-diverging palettes, we could start a trajectory with a reasonable chroma - no need to be “too grey”.</li>
<li>for diverging palettes, we need to start the trajectory with zero chroma, in order to respect the common point.</li>
<li>again for diverging palettes, the end of each arm should be not-too-far from the maximum chroma, as the chroma is what will drive the contrast between the two extrema of a “combined” diverging palette.</li>
</ul>
<p>Perhaps a set of templates could be used for these trajectories, then adapted to the chroma peculiarities of each surface family.</p>
</div>
</div>
<div id="joining-palettes" class="section level2">
<h2 class="hasAnchor">
<a href="#joining-palettes" class="anchor"></a>Joining palettes</h2>
<div id="diverging-palette-light-mode" class="section level3">
<h3 class="hasAnchor">
<a href="#diverging-palette-light-mode" class="anchor"></a>Diverging palette (light mode)</h3>
</div>
<div id="diverging-palette-dark-mode" class="section level3">
<h3 class="hasAnchor">
<a href="#diverging-palette-dark-mode" class="anchor"></a>Diverging palette (dark mode)</h3>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ian J Lyttle.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
